import{t as j,h as B,a as m,b as v}from"../chunks/ClnZs9JQ.js";import{j as L,l as P,$ as k,o as c,q as p,m as f,k as h,n as a,t as $,u as d}from"../chunks/l0T6cHFi.js";import{e as q}from"../chunks/TA4MYeQV.js";import{p as w}from"../chunks/DMxfHGK6.js";import{o as D}from"../chunks/CR20OqM2.js";import{g as I,B as S,d as C}from"../chunks/C4GzWmiy.js";import{i as E}from"../chunks/B_K-PZOM.js";import{I as z,B as H,D as M,g as T}from"../chunks/BR8oXL-R.js";import{g as x}from"../chunks/De928tLP.js";var W=j('<div class="mx-auto mb-10 mt-20 max-w-2xl"><div class="mb-10"><h3 class="mb-2 mt-4">Login</h3></div> <div><form class="mt-10 grid grid-cols-1 gap-y-8"><!> <br> <!></form></div></div>');function V(b,y){L(y,!0);let s=T(),o=h(""),r=h("");D(async()=>{if(s instanceof M)return;f(o,w(await I())),(await s.getChallenge(a(o))).length>0&&x(S+"/challenge")});async function A(t){t.preventDefault();try{let e=await s.login(a(o),a(r));e.jwt&&(document.cookie=C.serialize("jwt",e.jwt,{path:"/",maxAge:60*60}),E.set(!0)),x(e.redirect)}catch(e){window.alert("failed! "+e.message)}}var i=W();B(t=>{k.title="Login"});var g=c(p(i),2),n=p(g),u=p(n);z(u,{type:"password",id:"pass",get value(){return a(r)},set value(t){f(r,w(t))},children:(t,e)=>{$();var l=v("Password");m(t,l)},$$slots:{default:!0}});var _=c(u,4);H(_,{type:"submit",children:(t,e)=>{$();var l=v("Log in");m(t,l)},$$slots:{default:!0}}),d(n),d(g),d(i),q("submit",n,A),m(b,i),P()}export{V as component};
