import{t as A,h as _,a as m,b as y}from"../chunks/ClnZs9JQ.js";import{j as B,l as C,$ as L,o as f,q as c,m as v,k as w,n as o,t as k,u as p}from"../chunks/l0T6cHFi.js";import{e as P}from"../chunks/TA4MYeQV.js";import{p as $}from"../chunks/DMxfHGK6.js";import{o as q}from"../chunks/CR20OqM2.js";import{g as I,B as b,d as S}from"../chunks/YrPL4FWa.js";import{i as U}from"../chunks/B_K-PZOM.js";import{I as D,B as E,g as Q}from"../chunks/ZY0E9-ON.js";import{g as x}from"../chunks/CYbd3J-l.js";class z{async register(t,a){return{jwt:"abc",redirect:void 0}}async getUserQuestions(t){return[2,3]}async getQuestions(){return[{key:1,content:"What was the name of your first pet?"},{key:2,content:"What is the name of the street you grew up on?"},{key:3,content:"What was the make and model of your first car?"},{key:4,content:"What was the name of your elementary school?"},{key:5,content:"What is your favorite book?"}]}async patchUser(t,a,r){return!0}async login(t,a){return{jwt:void 0,redirect:"/challenge"}}async getChallenge(t){return[{key:2,content:"What is the name of the street you grew up on?"},{key:3,content:"What was the make and model of your first car?"},{key:4,content:"What was the name of your elementary school?"}]}async answerChallenge(t,a,r){return{jwt:"abc",redirect:"/"}}async deleteUser(t){}}var H=A('<div class="mx-auto mb-10 mt-20 max-w-2xl"><div class="mb-10"><h3 class="mb-2 mt-4">Login</h3></div> <div><form class="mt-10 grid grid-cols-1 gap-y-8"><!> <br> <!></form></div></div>');function V(d,t){B(t,!0);let a=Q(),r=w(""),n=w("");q(async()=>{if(a instanceof z)return;v(r,$(await I())),(await a.getChallenge(o(r))).length>0&&x(b+"/challenge")});async function W(e){e.preventDefault();try{let s=await a.login(o(r),o(n));s.jwt&&(document.cookie=S.serialize("jwt",s.jwt,{path:"/",maxAge:60*60}),U.set(!0)),x(b+s.redirect)}catch(s){window.alert("failed! "+s.message)}}var i=H();_(e=>{L.title="Login"});var u=f(c(i),2),l=c(u),g=c(l);D(g,{type:"password",id:"pass",get value(){return o(n)},set value(e){v(n,$(e))},children:(e,s)=>{k();var h=y("Password");m(e,h)},$$slots:{default:!0}});var j=f(g,4);E(j,{type:"submit",children:(e,s)=>{k();var h=y("Log in");m(e,h)},$$slots:{default:!0}}),p(l),p(u),p(i),P("submit",l,W),m(d,i),C()}export{V as component};
