import{t as B,h as L,a as m,b as v}from"../chunks/ClnZs9JQ.js";import{j as P,l as k,$ as q,o as c,q as p,m as f,k as h,n as a,t as $,u as d}from"../chunks/l0T6cHFi.js";import{e as D}from"../chunks/TA4MYeQV.js";import{p as w}from"../chunks/DMxfHGK6.js";import{o as I}from"../chunks/CR20OqM2.js";import{g as S,B as x,d as C}from"../chunks/C4GzWmiy.js";import{i as E}from"../chunks/B_K-PZOM.js";import{I as z,B as H,D as M,g as T}from"../chunks/BR8oXL-R.js";import{g as b}from"../chunks/IUKGVqcA.js";var W=B('<div class="mx-auto mb-10 mt-20 max-w-2xl"><div class="mb-10"><h3 class="mb-2 mt-4">Login</h3></div> <div><form class="mt-10 grid grid-cols-1 gap-y-8"><!> <br> <!></form></div></div>');function V(y,A){P(A,!0);let s=T(),o=h(""),r=h("");I(async()=>{if(s instanceof M)return;f(o,w(await S())),(await s.getChallenge(a(o))).length>0&&b(x+"/challenge")});async function _(t){t.preventDefault();try{let e=await s.login(a(o),a(r));e.jwt&&(document.cookie=C.serialize("jwt",e.jwt,{path:"/",maxAge:60*60}),E.set(!0)),b(x+e.redirect)}catch(e){window.alert("failed! "+e.message)}}var i=W();L(t=>{q.title="Login"});var g=c(p(i),2),n=p(g),u=p(n);z(u,{type:"password",id:"pass",get value(){return a(r)},set value(t){f(r,w(t))},children:(t,e)=>{$();var l=v("Password");m(t,l)},$$slots:{default:!0}});var j=c(u,4);H(j,{type:"submit",children:(t,e)=>{$();var l=v("Log in");m(t,l)},$$slots:{default:!0}}),d(n),d(g),d(i),D("submit",n,_),m(y,i),k()}export{V as component};
