import{t as j,h as q,a as g,b as x}from"../chunks/D0T786_O.js";import{t as E,m as u,u as I,$ as P,j as y,k as c,l as d,o as e,n as b,q as f,v as z}from"../chunks/BdVy2I1O.js";import{s as D}from"../chunks/N11n9GH2.js";import{e as H,i as L}from"../chunks/C3DpXuVZ.js";import{e as M}from"../chunks/vAJXdrVo.js";import{p as r}from"../chunks/CEkGUXtm.js";import{o as T}from"../chunks/BGZH7JQ1.js";import{d as W}from"../chunks/Drj6_Kw3.js";import{i as F}from"../chunks/DpOeENrT.js";import{B as G,I as J}from"../chunks/wBQbu8wO.js";import{g as _}from"../chunks/Din7jImg.js";import{g as K}from"../chunks/BL8opuJw.js";import{g as N,B as k,a as O}from"../chunks/CXUHTjiO.js";var Q=j('<div class="mx-auto mb-10 mt-20 max-w-2xl"><div class="mb-10"><h3 class="mb-2 mt-4">Challenge</h3></div> <div><form class="mt-10 grid grid-cols-1 gap-y-8"><!> <!></form></div></div>');function lt(A,C){E(C,!0);let v=K(),n=u(""),o=u(r([])),i=u(r([]));T(async()=>{if(d(n,r(await N())),d(o,r(await v.getChallenge(e(n)))),e(o).length===0){_(k+"/login");return}let t=[];e(o).forEach(a=>{t.push({key:a.key,content:""})}),d(i,r(t))});async function B(t){t.preventDefault();try{let a=await O(),s=await v.answerChallenge(e(n),e(i),a);document.cookie=W.serialize("jwt",s.jwt,{path:"/",maxAge:60*60}),F.set(!0),_(k+"/")}catch(a){window.alert("failed! "+a.message)}}var l=Q();q(t=>{P.title="Challenge"});var h=y(c(l),2),m=c(h),$=c(m);H($,17,()=>e(o),L,(t,a,s)=>{J(t,{type:"text",id:"quest"+s,get value(){return e(i)[s].content},set value(p){e(i)[s].content=p},children:(p,R)=>{b();var w=x();z(()=>D(w,e(a).content)),g(p,w)},$$slots:{default:!0}})});var S=y($,2);G(S,{type:"submit",children:(t,a)=>{b();var s=x("Answer");g(t,s)},$$slots:{default:!0}}),f(m),f(h),f(l),M("submit",m,B),g(A,l),I()}export{lt as component};
