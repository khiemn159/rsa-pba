import{t as q,h as D,a as c,b as y}from"../chunks/D0T786_O.js";import{t as E,m as g,u as I,$ as P,j as b,k as f,l as u,o as a,n as _,q as v,v as M}from"../chunks/BdVy2I1O.js";import{s as z}from"../chunks/N11n9GH2.js";import{e as H,i as L}from"../chunks/C3DpXuVZ.js";import{e as T}from"../chunks/vAJXdrVo.js";import{p as o}from"../chunks/CEkGUXtm.js";import{o as U}from"../chunks/BGZH7JQ1.js";import{d as W}from"../chunks/Drj6_Kw3.js";import{i as F}from"../chunks/DpOeENrT.js";import{B as G,I as J}from"../chunks/wBQbu8wO.js";import{g as A}from"../chunks/Cuz_f3CF.js";import{g as K}from"../chunks/Q1RwxjmK.js";import{g as N,B as k}from"../chunks/C6fDkkBA.js";var O=q('<div class="mx-auto mb-10 mt-20 max-w-2xl"><div class="mb-10"><h3 class="mb-2 mt-4">Challenge</h3></div> <div><form class="mt-10 grid grid-cols-1 gap-y-8"><!> <!></form></div></div>');function nt(C,B){E(B,!0);let h=K(),m=g(""),i=g(o([])),n=g(o([]));U(async()=>{if(u(m,o(await N())),u(i,o(await h.getChallenge(a(m)))),a(i).length===0){A(k+"/login");return}let t=[];a(i).forEach(e=>{t.push({key:e.key,content:""})}),u(n,o(t))});async function S(t){t.preventDefault();try{let e=await window.cardano.eternl.enable(),s=await e.getUsedAddresses();const r=Math.floor(Date.now()/1e3)*1e3-10*60*1e3;let x=await e.signData(s[0],"0"+r.toString(16)),l=await h.answerChallenge(a(m),a(n),x);document.cookie=W.serialize("jwt",l.jwt,{path:"/",maxAge:60*60}),F.set(!0),A(k+"/")}catch(e){window.alert("failed! "+e.message)}}var p=O();D(t=>{P.title="Challenge"});var w=b(f(p),2),d=f(w),$=f(d);H($,17,()=>a(i),L,(t,e,s)=>{J(t,{type:"text",id:"quest"+s,get value(){return a(n)[s].content},set value(r){a(n)[s].content=r},children:(r,x)=>{_();var l=y();M(()=>z(l,a(e).content)),c(r,l)},$$slots:{default:!0}})});var j=b($,2);G(j,{type:"submit",children:(t,e)=>{_();var s=y("Answer");c(t,s)},$$slots:{default:!0}}),v(d),v(w),v(p),T("submit",d,S),c(C,p),I()}export{nt as component};
