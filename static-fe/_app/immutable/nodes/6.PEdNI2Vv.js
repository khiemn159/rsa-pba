import{t as L,a as d,h as Q,b as w}from"../chunks/ClnZs9JQ.js";import{v as U,q as c,u as p,j as T,k as g,l as W,$ as Y,o as x,m as h,n as r,t as _}from"../chunks/l0T6cHFi.js";import{s as z}from"../chunks/8GF0UDw8.js";import{e as H,i as K}from"../chunks/OtK21MUW.js";import{e as M}from"../chunks/TA4MYeQV.js";import{p as i}from"../chunks/DMxfHGK6.js";import{o as R}from"../chunks/CR20OqM2.js";import{s as F,g as G,d as J,B as D}from"../chunks/C4GzWmiy.js";import{s as N,i as O}from"../chunks/B_K-PZOM.js";import{B as V,g as X,C as Z,I as tt}from"../chunks/BR8oXL-R.js";import{g as E}from"../chunks/IUKGVqcA.js";import{r as et}from"../chunks/D0Py5RU9.js";var at=L("<button><!></button>");function ot(y,m){let n=et(m,["$$slots","$$events","$$legacy","children"]);var s=at();let l;var u=c(s);F(u,()=>m.children),p(s),U(()=>l=N(s,l,{...n,class:"group inline-flex items-center justify-center rounded-full bg-red-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-500 focus:outline-none active:bg-blue-800 active:text-blue-100"})),d(y,s)}var rt=L('<div class="mx-auto mb-10 mt-20 max-w-2xl"><div class="mb-10"><h3 class="mb-2 mt-4">Profile</h3></div> <div><form class="mt-10 grid grid-cols-1 gap-y-8"><!> <div><!> <!></div></form></div></div>');function ht(y,m){T(m,!0);let n=X(),s=g(""),l=g(i([])),u=g(i([])),f=g(i([]));function j(t){return Array.from(t).map(e=>e.charCodeAt(0).toString(16).padStart(2,"0")).join("")}R(async()=>{h(u,i(await n.getQuestions()));let t=[];r(u).forEach(e=>{t.push({key:e.key,content:""})}),h(f,i(t)),h(s,i(await G())),h(l,i(await n.getUserQuestions(r(s))))});async function C(t){if(t.preventDefault(),!!window.confirm("You are about to update your account. Are you sure?"))try{const e=[],o=[];if(r(f).forEach(a=>{a.content!==""&&r(l).includes(a.key)&&o.push(a.key),a.content!==""&&e.push(a)}),Z){let a=await window.cardano.eternl.enable(),S=await a.getUsedAddresses(),v=await a.signData(S[0],j("confirm your action"));console.log(v)}await n.patchUser(r(s),e,o),E(D+"/")}catch(e){window.alert("failed! "+e.message)}}async function q(t){if(t.preventDefault(),!!window.confirm("You are about to delete your account. Are you sure?"))try{await n.deleteUser(r(s)),document.cookie=J.serialize("jwt","",{path:"/",expires:new Date(0)}),O.set(!1),E(D+"/")}catch(e){window.alert("failed! "+e.message)}}var b=rt();Q(t=>{Y.title="Profile"});var A=x(c(b),2),$=c(A),P=c($);H(P,17,()=>r(u),K,(t,e,o)=>{tt(t,{type:"text",id:"quest"+o,get value(){return r(f)[o].content},set value(a){r(f)[o].content=a},children:(a,S)=>{_();var v=w();U(()=>z(v,r(e).content)),d(a,v)},$$slots:{default:!0}})});var k=x(P,2),B=c(k);V(B,{type:"submit",children:(t,e)=>{_();var o=w("Update Profile");d(t,o)},$$slots:{default:!0}});var I=x(B,2);ot(I,{onclick:q,children:(t,e)=>{_();var o=w("Delete Profile");d(t,o)},$$slots:{default:!0}}),p(k),p($),p(A),p(b),M("submit",$,C),d(y,b),W()}export{ht as component};
