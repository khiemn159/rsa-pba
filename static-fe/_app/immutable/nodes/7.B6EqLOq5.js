import{t as S,a as m,h as I,b as x}from"../chunks/D0T786_O.js";import{v as U,k as p,q as c,t as Q,m as v,u as T,$ as W,j as y,l as g,o as s,n as w}from"../chunks/BdVy2I1O.js";import{s as z}from"../chunks/N11n9GH2.js";import{e as H,i as K}from"../chunks/C3DpXuVZ.js";import{e as M}from"../chunks/vAJXdrVo.js";import{p as i}from"../chunks/CEkGUXtm.js";import{o as R}from"../chunks/BGZH7JQ1.js";import{s as F,d as G}from"../chunks/Drj6_Kw3.js";import{i as J}from"../chunks/DpOeENrT.js";import{B as N,I as O}from"../chunks/DP8b13Oj.js";import{g as E}from"../chunks/D8MtXhNV.js";import{g as V,C as X}from"../chunks/BL8opuJw.js";import{a as Y}from"../chunks/CK1kHlaq.js";import{r as Z}from"../chunks/ChzcKbe0.js";import{g as tt,a as L,B as D}from"../chunks/CXUHTjiO.js";var et=S("<button><!></button>");function at(h,d){let n=Z(d,["$$slots","$$events","$$legacy","children"]);var o=et();let l;var u=p(o);F(u,()=>d.children),c(o),U(()=>l=Y(o,l,{...n,class:"group inline-flex items-center justify-center rounded-full bg-red-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-500 focus:outline-none active:bg-blue-800 active:text-blue-100"})),m(h,o)}var st=S('<div class="mx-auto mb-10 mt-20 max-w-2xl"><div class="mb-10"><h3 class="mb-2 mt-4">Profile</h3></div> <div><form class="mt-10 grid grid-cols-1 gap-y-8"><!> <div class="button-container svelte-bu0lw3"><!> <!></div></form></div></div>');function xt(h,d){Q(d,!0);let n=V(),o=v(""),l=v(i([])),u=v(i([])),f=v(i([]));R(async()=>{g(u,i(await n.getQuestions()));let e=[];s(u).forEach(t=>{e.push({key:t.key,content:""})}),g(f,i(e)),g(o,i(await tt())),g(l,i(await n.getUserQuestions(s(o))))});async function j(e){e.preventDefault();try{const t=[],a=[];s(f).forEach(r=>{r.content!==""&&s(l).includes(r.key)&&a.push(r.key),r.content!==""&&t.push(r)}),X&&await L(),await n.patchUser(s(o),t,a),E(D+"/")}catch(t){window.alert("failed! "+t.message)}}async function q(e){e.preventDefault();try{let t=await L();await n.deleteUser(s(o),t),document.cookie=G.serialize("jwt","",{path:"/",expires:new Date(0)}),J.set(!1),E(D+"/")}catch(t){window.alert("failed! "+t.message)}}var $=st();I(e=>{W.title="Profile"});var _=y(p($),2),b=p(_),P=p(b);H(P,17,()=>s(u),K,(e,t,a)=>{O(e,{type:"text",id:"quest"+a,get value(){return s(f)[a].content},set value(r){s(f)[a].content=r},children:(r,ot)=>{w();var B=x();U(()=>z(B,s(t).content)),m(r,B)},$$slots:{default:!0}})});var k=y(P,2),A=p(k);N(A,{type:"submit",children:(e,t)=>{w();var a=x("Update Profile");m(e,a)},$$slots:{default:!0}});var C=y(A,2);at(C,{onclick:q,children:(e,t)=>{w();var a=x("Delete Profile");m(e,a)},$$slots:{default:!0}}),c(k),c(b),c(_),c($),M("submit",b,j),m(h,$),T()}export{xt as component};
